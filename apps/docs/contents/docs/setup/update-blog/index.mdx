---
title: Update Blog on Production
description: How to update blog content in production
---
## Overview

How to update blog content in production

When you publish a new article on Hashnode, it won't automatically appear on your production site due to build-time caching. Here's how to make it appear.

## √∞≈∏≈Ω¬Ø The Problem

Your blog page is built at **deploy time** and cached. When you publish a new Hashnode article:
- ‚úÖ The article is immediately available via Hashnode API
- √¢¬ù≈í Your production site shows cached/old content
- √¢¬è¬≥ ISR (60-second revalidation) helps, but only after users visit the page

## üöÄ Solutions (Choose One)

### Option 1: Manual Redeploy in Vercel Dashboard (Easiest)

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Select your Portfolio OS project
3. Click on the **Deployments** tab
4. Find the latest production deployment
5. Click the **√¢‚Äπ¬Ø** (three dots) menu
6. Select **"Redeploy"**
7. Check **"Use existing Build Cache"** (optional, for faster deploy)
8. Click **"Redeploy"**

√¢¬è¬≥ **Wait 2-3 minutes** for deployment to complete.

---

### Option 2: Redeploy via CLI Script (Automated)

```bash
# 1. Get your Vercel API token
# Visit: https://vercel.com/account/tokens
# Create a new token with "Full Account" access

# 2. Store the token securely (never commit this file)
echo "VERCEL_API_TOKEN=your_token_here" >> .env.local

# 3. Run the redeploy script (reads from .env.local automatically)
npx tsx scripts/trigger-vercel-redeploy.ts

# Optional: one-off execution without writing to disk
# VERCEL_API_TOKEN=your_token_here npx tsx scripts/trigger-vercel-redeploy.ts
```

---

### Option 3: Use Revalidation API (For Minor Updates)

If the site is already built with your article but you just need to clear cache:

```bash
# Method 1: Using curl (if you have CRON_SECRET configured)
curl -X POST "https://yourdomain.com/api/revalidate?path=/blog&secret=YOUR_CRON_SECRET"

# Method 2: Using the script
npx tsx scripts/revalidate-blog.ts
```

> **Note:** This only works if the article was included during the last build. For brand new articles, use Option 1 or 2.

---

### Option 4: Push a Commit (Triggers Auto-Deploy)

If you have auto-deployments enabled:

```bash
# Make a small change (like updating a comment)
git commit --allow-empty -m "chore: trigger redeploy for new blog post"
git push origin main
```

This triggers a fresh deployment automatically.

---

## √∞≈∏‚Äù¬ß Permanent Solution: Disable Build-Time Skipping

Currently, your blog page skips API calls during build to prevent hanging:

```typescript
// apps/site/app/blog/page.tsx (line 103)
if (process.env.NEXT_PHASE !== 'phase-production-build') {
  // Fetch posts only at runtime, not during build
}
```

### To Enable Build-Time Fetching:

This would fetch posts during build, but may increase build time:

```typescript
// Remove the NEXT_PHASE check
const [fetchedPosts, fetchedPublication] = await Promise.all([
  fetchPosts(10),
  fetchPublication()
]);
```

√¢≈°¬†√Ø¬∏¬è **Tradeoff:** 
- ‚úÖ New articles appear on next deployment
- √¢¬ù≈í Slower builds (adds ~3-5 seconds)
- √¢¬ù≈í Build fails if Hashnode is down

---

## √∞≈∏‚Äú≈† How ISR Works

Your blog uses **Incremental Static Regeneration (ISR)** with 60-second revalidation:

```typescript
export const revalidate = 60; // 60 seconds
```

This means:
1. First visitor gets cached page (old content)
2. After 60 seconds, Next.js fetches fresh data
3. Next visitor gets updated page

**Problem:** New articles won't appear until the page is rebuilt.

---

## ‚úÖ Recommended Workflow

When you publish a new article on Hashnode:

1. **Verify it's published:**
   ```bash
   npx tsx apps/site/scripts/test-hashnode-connection.ts
   ```

2. **Trigger a redeploy** (Option 1 or 2 above)

3. **Wait 2-3 minutes** for deployment

4. **Clear your browser cache** and refresh

5. **Verify the article appears** on your production site

---

## √∞≈∏¬ê‚Ä∫ Troubleshooting

### "I redeployed but still don't see my article"

1. **Check Hashnode:** Verify the article is actually published (not draft)
   ```bash
   npx tsx apps/site/scripts/test-hashnode-connection.ts YOUR-ARTICLE-SLUG
   ```

2. **Clear ALL caches:**
   - Browser cache (Ctrl+Shift+R / Cmd+Shift+R)
   - Vercel CDN (redeploy does this automatically)
   - Next.js data cache (redeploy does this automatically)

3. **Check build logs:** Look for any errors fetching from Hashnode during build

4. **Verify environment variables:** 
   - `NEXT_PUBLIC_HASHNODE_PUBLICATION_HOST` is set correctly in Vercel

### "Deployment takes too long"

Consider using build cache:
- In Vercel: Check "Use existing Build Cache" when redeploying
- This reuses node_modules and speeds up deployment

---

## √∞≈∏‚Äú¬ù Summary

**For new Hashnode articles:**
1. ‚úÖ Use Vercel Dashboard "Redeploy" button (easiest)
2. ‚úÖ Or use CLI script with Vercel API token
3. √¢¬ù≈í Don't rely on ISR alone - it won't pick up new articles

**For updated content on existing articles:**
1. ‚úÖ Use revalidation API (`/api/revalidate`)
2. ‚úÖ Or wait 60 seconds for ISR to kick in
3. ‚úÖ Or redeploy (also works, but overkill)

---

## √∞≈∏‚Äù‚Äî Related Files

- `apps/site/app/blog/page.tsx` - Blog page component
- `apps/site/lib/content-api.ts` - Content fetching logic
- `apps/site/lib/hashnode-api.ts` - Hashnode API client
- `scripts/trigger-vercel-redeploy.ts` - Redeploy automation script
- `scripts/revalidate-blog.ts` - Cache revalidation script
- `apps/site/app/api/revalidate/route.ts` - Revalidation API endpoint
